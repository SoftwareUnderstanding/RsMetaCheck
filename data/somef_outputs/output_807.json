{"somef_provenance": {"somef_version": "0.9.12", "somef_schema_version": "1.0.0", "date": "2025-11-17 14:50:13"}, "code_repository": [{"result": {"value": "https://github.com/rOpenSpain/spanishoddata", "type": "Url"}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "https://github.com/rOpenSpain/spanishoddata", "type": "Url"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, {"result": {"value": "https://github.com/rOpenSpain/spanishoddata", "type": "Url"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "owner": [{"result": {"value": "rOpenSpain", "type": "Organization"}, "confidence": 1, "technique": "GitHub_API"}], "date_created": [{"result": {"value": "2024-06-11T14:15:43Z", "type": "Date"}, "confidence": 1, "technique": "GitHub_API"}], "date_updated": [{"result": {"value": "2025-11-14T16:05:16Z", "type": "Date"}, "confidence": 1, "technique": "GitHub_API"}], "description": [{"result": {"value": "Access national high-quality and open-access datasets on movement patterns derived from mobile telephone datasets / Accede y usa datos nacionales abiertos sobre movimientos basados en tel\u00e9fonos m\u00f3viles.", "type": "String"}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "Gain seamless access to origin-destination (OD) data from the\n    Spanish Ministry of Transport, hosted at\n    <https://www.transportes.gob.es/ministerio/proyectos-singulares/estudios-de-movilidad-con-big-data/opendata-movilidad>.\n    This package simplifies the management of these large datasets by\n    providing tools to download zone boundaries, handle associated\n    origin-destination data, and process it efficiently with the 'duckdb'\n    database interface.  Local caching minimizes repeated downloads,\n    streamlining workflows for researchers and analysts. Extensive\n    documentation is available at\n    <https://ropenspain.github.io/spanishoddata/index.html>, offering\n    guides on creating static and dynamic mobility flow visualizations and\n    transforming large datasets into analysis-ready formats.", "type": "String", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, {"result": {"value": "Gain seamless access to origin-destination (OD) data from the Spanish Ministry of Transport, hosted at <https://www.transportes.gob.es/ministerio/proyectos-singulares/estudios-de-movilidad-con-big-data/opendata-movilidad>. This package simplifies the management of these large datasets by providing tools to download zone boundaries, handle associated origin-destination data, and process it efficiently with the 'duckdb' database interface. Local caching minimizes repeated downloads, streamlining workflows for researchers and analysts. Extensive documentation is available at <https://ropenspain.github.io/spanishoddata/index.html>, offering guides on creating static and dynamic mobility flow visualizations and transforming large datasets into analysis-ready formats.", "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "name": [{"result": {"value": "spanishoddata", "type": "String"}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "spanishoddata: Get Spanish Origin-Destination Data", "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "full_name": [{"result": {"value": "rOpenSpain/spanishoddata", "type": "String"}, "confidence": 1, "technique": "GitHub_API"}], "issue_tracker": [{"result": {"value": "https://api.github.com/repos/rOpenSpain/spanishoddata/issues", "type": "Url"}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "https://github.com/rOpenSpain/spanishoddata/issues", "type": "Url"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, {"result": {"value": "https://github.com/rOpenSpain/spanishoddata/issues", "type": "Url"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "forks_url": [{"result": {"value": "https://api.github.com/repos/rOpenSpain/spanishoddata/forks", "type": "Url"}, "confidence": 1, "technique": "GitHub_API"}], "stargazers_count": [{"result": {"value": 46, "type": "Number"}, "confidence": 1, "technique": "GitHub_API"}], "keywords": [{"result": {"value": "cdr, data, data-package, mobile-telephone-data, mobility, origin-destination, rstats", "type": "String"}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": ["cdr", "data", "data-package", "mobility", "origin-destination", "rstats", "mobile-telephone-data"], "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "forks_count": [{"result": {"value": 6, "type": "Number"}, "confidence": 1, "technique": "GitHub_API"}], "homepage": [{"result": {"value": "https://ropenspain.github.io/spanishoddata/", "type": "Url"}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "https://rOpenSpain.github.io/spanishoddata/", "type": "Url"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}], "download_url": [{"result": {"value": "https://github.com/rOpenSpain/spanishoddata/releases", "type": "Url"}, "confidence": 1, "technique": "GitHub_API"}], "programming_languages": [{"result": {"value": "R", "name": "R", "type": "Programming_language", "size": 213816}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "TeX", "name": "TeX", "type": "Programming_language", "size": 3880}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "Rez", "name": "Rez", "type": "Programming_language", "size": 1315}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"value": "Mermaid", "name": "Mermaid", "type": "Programming_language", "size": 1293}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"name": "R", "value": "R", "type": "Programming_language", "url": "https://r-project.org"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "releases": [{"result": {"type": "Release", "value": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/235915974", "tag": "v0.2.1", "name": "spanishoddata 0.2.1", "author": {"name": "e-kotov", "type": "User"}, "description": "## Bug fixes\n\n* Fixed incorrect reaggregation of district level data into municipal level data for v1 (2020-2021) data (PR [#170](https://github.com/rOpenSpain/spanishoddata/pull/170))\n\n## Improvements\n\n* Minor documentation improvements and updates to direct users to the `spod_set_data_dir()` function to set the data directory instead of advising to set the environment variable manually.\n", "tarball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/tarball/v0.2.1", "zipball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/zipball/v0.2.1", "html_url": "https://github.com/rOpenSpain/spanishoddata/releases/tag/v0.2.1", "url": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/235915974", "release_id": 235915974, "date_created": "2025-07-29T10:17:58Z", "date_published": "2025-07-29T10:53:58Z", "assets": []}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"type": "Release", "value": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/225484123", "tag": "v0.2.0", "name": "spanishoddata 0.2.0", "author": {"name": "e-kotov", "type": "User"}, "description": "## New features\n\n* `spod_quick_get_zones()` is a new function to quickly get municipality geometries to match with the data retrieved with `spod_quick_get_od()` (PR [#163](https://github.com/rOpenSpain/spanishoddata/pull/163)). This function is experimental, just as the `spod_quick_get_od()` function, as the API of the Spanish Ministry of Transport may change in the future. It is only intended for quick analysis in educational or other demonstration purposes, as it downloads very little data compared to the regular `spod_get_od()`, `spod_download()` and `spod_convert()` functions. The requests are cached in memory of the current R session with `memoise` package, so repeated calls to `spod_quick_get_zones()` will not cause repeated requests to the API and will allow the user to get the data faster from repeat calls.\n\n* Experimental `spod_check_files()` function allows to check consistency of downloaded files with Amazon S3 checksums (PR [#165](https://github.com/rOpenSpain/spanishoddata/pull/165)). ETags for v1 data are stored with the package, and for v2 data they are fetched from Amazon S3. The checks may fail for May 2022 data and for some 2025 data, as the remote cheksums that are used for checking the file consistency are incorrect. We are working on solving this in future updates, for now, kindly rely on the built-in file size checks of `spod_download()`, `spod_get()`, and `spod_convert()`.\n\n## Improvements\n\n* `spod_get()` and `spod_convert()` are now up to x100,000 faster when you have all (or a lot of) data downloaded, but only requesting several days in the call to `spod_get()` or `spod_convert()`. This is thanks to a new smarter filtering strategy (issue [#159](https://github.com/rOpenSpain/spanishoddata/issues/159), PR [#166](https://github.com/rOpenSpain/spanishoddata/pull/166)).\n\n* Metadata is now fetched from Amazon S3 storage of the original data files, which allows validation of downloaded files (issue [#126](https://github.com/rOpenSpain/spanishoddata/issues/126)) with both size and checksum. PR [#165](https://github.com/rOpenSpain/spanishoddata/pull/165).\n\n* Metadata fetched by `spod_available_data()` has extra columns such as data `type`, `zones` and `period`, see help `?spod_available_data()` for details.\n\n* Memory allocation is now delegated to `DuckDB` engine, which by default uses 80% of available RAM. Beware that in some HPC environments this may detect more memory than is actually available to your job, so set the limit manually to 80% of RAM available to your job with `max_mem_gb` argument of `spod_get()`, `spod_convert()`, `spod_connect()` functions. This will also improve performance in some cases, as DuckDB is more efficient than R at memory allocation (PR [#167](https://github.com/rOpenSpain/spanishoddata/pull/167)).\n\n## Bug fixes\n\n* More reliable, but still multi-threaded data file downloads using base R `utils::download.file()` instead of `curl::multi_download()` which failed on some connections (issue [#127](https://github.com/rOpenSpain/spanishoddata/issues/127)), so now `curl` dependency is no longer required. PR [#165](https://github.com/rOpenSpain/spanishoddata/pull/165).\n\n* `spod_quick_get_od()` is working again. We fixed it to work with the updated API of the Spanish Ministry of Transport (PR [#163](https://github.com/rOpenSpain/spanishoddata/pull/163), issue [#162](https://github.com/rOpenSpain/spanishoddata/issues/162)). This function will remain experimental, just as the `spod_quick_get_zones()` function, as the API of the Spanish Ministry of Transport may change in the future. It is only intended for quick analysis in educational or other demonstration purposes, as it downloads very little data compared to the regular `spod_get_od()`, `spod_download()` and `spod_convert()` functions. The requests are cached in memory of the current R session with `memoise` package, so repeated calls to `spod_quick_get_od()` will not cause repeated requests to the API and will allow the user to get the data faster from repeat calls.\n\n* `spod_convert()` now accepts `overwrite = 'update'` with `save_format = 'parquet'` ([#161](https://github.com/rOpenSpain/spanishoddata/pull/161)) previously it failed because of the incorrect check that asserted only `TRUE` or `FALSE` ([#160](https://github.com/rOpenSpain/spanishoddata/issues/160))\n", "tarball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/tarball/v0.2.0", "zipball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/zipball/v0.2.0", "html_url": "https://github.com/rOpenSpain/spanishoddata/releases/tag/v0.2.0", "url": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/225484123", "release_id": 225484123, "date_created": "2025-06-15T20:00:27Z", "date_published": "2025-06-16T08:14:16Z", "assets": []}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"type": "Release", "value": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/211322566", "tag": "v0.1.1", "name": "spanishoddata 0.1.1", "author": {"name": "e-kotov", "type": "User"}, "description": "## New features\n\n* `spod_cite()` function to easily cite the package and the data ([#134](https://github.com/rOpenSpain/spanishoddata/pull/134))\n\n## Breaking changes\n\n* `hour` column is superseeded by `time_slot` column in the output of `spod_get()` and `spod_convert()`. `time_slot` is deprecated. It is still present in the tables, but will be removed in the end of 2025 but going forward please use the new `hour` column. Otherwise it is exactly the same as before, this is just a name change. (#132)\n\n## Other changes\n\n* `spod_quick_get()` does not rely on metadata download anymore and can be used without setting the data directory with `spod_set_data_dir()` (and therefore does not cause a warning if the data directory is not set).\n\n* `hour` (ex-`time_slot`) column is now right next to the date column in the output of `spod_get()` and `spod_convert()` (#)\n\n* maximum available CPU cores check is now turned off to improve compatibility when running the package from within a container in high performance computing environments (see [#130](https://github.com/rOpenSpain/spanishoddata/issues/130) and [#140](https://github.com/rOpenSpain/spanishoddata/pull/140) for details)\n\n* minor documentation improvements and updates\n\n* minor bug fixes\n", "tarball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/tarball/v0.1.1", "zipball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/zipball/v0.1.1", "html_url": "https://github.com/rOpenSpain/spanishoddata/releases/tag/v0.1.1", "url": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/211322566", "release_id": 211322566, "date_created": "2025-04-08T16:30:25Z", "date_published": "2025-04-09T15:30:46Z", "assets": []}, "confidence": 1, "technique": "GitHub_API"}, {"result": {"type": "Release", "value": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/191473130", "tag": "v0.1.0", "name": "spanishoddata 0.1.0", "author": {"name": "e-kotov", "type": "User"}, "description": "* Initial CRAN submission.\n", "tarball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/tarball/v0.1.0", "zipball_url": "https://api.github.com/repos/rOpenSpain/spanishoddata/zipball/v0.1.0", "html_url": "https://github.com/rOpenSpain/spanishoddata/releases/tag/v0.1.0", "url": "https://api.github.com/repos/rOpenSpain/spanishoddata/releases/191473130", "release_id": 191473130, "date_created": "2024-12-17T11:35:18Z", "date_published": "2024-12-18T15:47:06Z", "assets": []}, "confidence": 1, "technique": "GitHub_API"}], "citation": [{"result": {"value": "# --------------------------------------------\n# CITATION file created with {cffr} R package\n# See also: https://docs.ropensci.org/cffr/\n# --------------------------------------------\n \ncff-version: 1.2.0\nmessage: 'To cite package \"spanishoddata\" in publications use:'\ntype: software\nlicense: MIT\ntitle: 'spanishoddata: Get Spanish Origin-Destination Data'\nversion: 0.2.1\ndoi: 10.32614/CRAN.package.spanishoddata\nidentifiers:\n- type: doi\n  value: 10.32614/CRAN.package.spanishoddata\nabstract: Gain seamless access to origin-destination (OD) data from the Spanish Ministry\n  of Transport, hosted at <https://www.transportes.gob.es/ministerio/proyectos-singulares/estudios-de-movilidad-con-big-data/opendata-movilidad>.\n  This package simplifies the management of these large datasets by providing tools\n  to download zone boundaries, handle associated origin-destination data, and process\n  it efficiently with the 'duckdb' database interface. Local caching minimizes repeated\n  downloads, streamlining workflows for researchers and analysts. Extensive documentation\n  is available at <https://ropenspain.github.io/spanishoddata/index.html>, offering\n  guides on creating static and dynamic mobility flow visualizations and transforming\n  large datasets into analysis-ready formats.\nauthors:\n- family-names: Kotov\n  given-names: Egor\n  email: kotov.egor@gmail.com\n  orcid: https://orcid.org/0000-0001-6690-5345\n- family-names: Lovelace\n  given-names: Robin\n  email: rob00x@gmail.com\n  orcid: https://orcid.org/0000-0001-5679-6536\npreferred-citation:\n  type: manual\n  title: spanishoddata\n  authors:\n  - family-names: Kotov\n    given-names: Egor\n    email: kotov.egor@gmail.com\n    orcid: https://orcid.org/0000-0001-6690-5345\n  - family-names: Lovelace\n    given-names: Robin\n    email: rob00x@gmail.com\n    orcid: https://orcid.org/0000-0001-5679-6536\n  - family-names: Vidal-Tortosa\n    given-names: Eugeni\n    orcid: https://orcid.org/0000-0001-5199-4103\n  year: '2024'\n  url: https://github.com/rOpenSpain/spanishoddata\n  doi: 10.32614/CRAN.package.spanishoddata\nrepository: https://CRAN.R-project.org/package=spanishoddata\nrepository-code: https://github.com/rOpenSpain/spanishoddata\nurl: https://rOpenSpain.github.io/spanishoddata/\ncontact:\n- family-names: Kotov\n  given-names: Egor\n  email: kotov.egor@gmail.com\n  orcid: https://orcid.org/0000-0001-6690-5345\nkeywords:\n- cdr\n- data\n- data-package\n- mobile-telephone-data\n- mobility\n- origin-destination\n- rstats\nreferences:\n- type: generic\n  title: Estudio de la movilidad con Big Data (Study of mobility with Big Data)\n  authors:\n  - name: Ministerio de Transportes y Movilidad Sostenible (MITMS)\n  year: '2024'\n  url: https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data\n- type: manual\n  title: Estudio de movilidad de viajeros de \u00e1mbito nacional aplicando la tecnolog\u00eda\n    Big Data. Informe metodol\u00f3gico (Study of National Traveler mobility Using Big\n    Data Technology. Methodological Report)\n  authors:\n  - name: Ministerio de Transportes y Movilidad Sostenible (MITMS)\n  year: '2024'\n  url: https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf\n- type: manual\n  title: An\u00e1lisis de la movilidad en Espa\u00f1a con tecnolog\u00eda Big Data durante el estado\n    de alarma para la gesti\u00f3n de la crisis del COVID-19 (Analysis of mobility in Spain\n    with Big Data technology during the state of alarm for COVID-19 crisis management)\n  authors:\n  - name: Ministerio de Transportes, Movilidad y Agenda Urbana (MITMA)\n  year: '2021'\n  url: https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf\n- type: software\n  title: 'R: A Language and Environment for Statistical Computing'\n  notes: Depends\n  url: https://www.R-project.org/\n  authors:\n  - name: R Core Team\n  institution:\n    name: R Foundation for Statistical Computing\n    address: Vienna, Austria\n  year: '2025'\n  version: '>= 4.1.0'\n- type: software\n  title: checkmate\n  abstract: 'checkmate: Fast and Versatile Argument Checks'\n  notes: Imports\n  url: https://mllg.github.io/checkmate/\n  repository: https://CRAN.R-project.org/package=checkmate\n  authors:\n  - family-names: Lang\n    given-names: Michel\n    email: michellang@gmail.com\n    orcid: https://orcid.org/0000-0001-9754-0393\n  year: '2025'\n  doi: 10.32614/CRAN.package.checkmate\n- type: software\n  title: DBI\n  abstract: 'DBI: R Database Interface'\n  notes: Imports\n  url: https://dbi.r-dbi.org\n  repository: https://CRAN.R-project.org/package=DBI\n  authors:\n  - name: R Special Interest Group on Databases (R-SIG-DB)\n  - family-names: Wickham\n    given-names: Hadley\n  - family-names: M\u00fcller\n    given-names: Kirill\n    email: kirill@cynkra.com\n    orcid: https://orcid.org/0000-0002-1416-3412\n  year: '2025'\n  doi: 10.32614/CRAN.package.DBI\n- type: software\n  title: digest\n  abstract: 'digest: Create Compact Hash Digests of R Objects'\n  notes: Imports\n  url: https://dirk.eddelbuettel.com/code/digest.html\n  repository: https://CRAN.R-project.org/package=digest\n  authors:\n  - family-names: Eddelbuettel\n    given-names: Dirk\n    email: edd@debian.org\n    orcid: https://orcid.org/0000-0001-6419-907X\n  year: '2025'\n  doi: 10.32614/CRAN.package.digest\n- type: software\n  title: dplyr\n  abstract: 'dplyr: A Grammar of Data Manipulation'\n  notes: Imports\n  url: https://dplyr.tidyverse.org\n  repository: https://CRAN.R-project.org/package=dplyr\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n    orcid: https://orcid.org/0000-0003-4757-117X\n  - family-names: Fran\u00e7ois\n    given-names: Romain\n    orcid: https://orcid.org/0000-0002-2444-4226\n  - family-names: Henry\n    given-names: Lionel\n  - family-names: M\u00fcller\n    given-names: Kirill\n    orcid: https://orcid.org/0000-0002-1416-3412\n  - family-names: Vaughan\n    given-names: Davis\n    email: davis@posit.co\n    orcid: https://orcid.org/0000-0003-4777-038X\n  year: '2025'\n  doi: 10.32614/CRAN.package.dplyr\n- type: software\n  title: duckdb\n  abstract: 'duckdb: DBI Package for the DuckDB Database Management System'\n  notes: Imports\n  url: https://r.duckdb.org/\n  repository: https://CRAN.R-project.org/package=duckdb\n  authors:\n  - family-names: M\u00fchleisen\n    given-names: Hannes\n    email: hannes@cwi.nl\n    orcid: https://orcid.org/0000-0001-8552-0029\n  - family-names: Raasveldt\n    given-names: Mark\n    email: mark.raasveldt@cwi.nl\n    orcid: https://orcid.org/0000-0001-5005-6844\n  year: '2025'\n  doi: 10.32614/CRAN.package.duckdb\n  version: '>= 0.5.0'\n- type: software\n  title: fs\n  abstract: 'fs: Cross-Platform File System Operations Based on ''libuv'''\n  notes: Imports\n  url: https://fs.r-lib.org\n  repository: https://CRAN.R-project.org/package=fs\n  authors:\n  - family-names: Hester\n    given-names: Jim\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  - family-names: Cs\u00e1rdi\n    given-names: G\u00e1bor\n    email: csardi.gabor@gmail.com\n  year: '2025'\n  doi: 10.32614/CRAN.package.fs\n- type: software\n  title: glue\n  abstract: 'glue: Interpreted String Literals'\n  notes: Imports\n  url: https://glue.tidyverse.org/\n  repository: https://CRAN.R-project.org/package=glue\n  authors:\n  - family-names: Hester\n    given-names: Jim\n    orcid: https://orcid.org/0000-0002-2739-7082\n  - family-names: Bryan\n    given-names: Jennifer\n    email: jenny@posit.co\n    orcid: https://orcid.org/0000-0002-6983-2759\n  year: '2025'\n  doi: 10.32614/CRAN.package.glue\n- type: software\n  title: here\n  abstract: 'here: A Simpler Way to Find Your Files'\n  notes: Imports\n  url: https://here.r-lib.org/\n  repository: https://CRAN.R-project.org/package=here\n  authors:\n  - family-names: M\u00fcller\n    given-names: Kirill\n    email: krlmlr+r@mailbox.org\n    orcid: https://orcid.org/0000-0002-1416-3412\n  year: '2025'\n  doi: 10.32614/CRAN.package.here\n- type: software\n  title: httr2\n  abstract: 'httr2: Perform HTTP Requests and Process the Responses'\n  notes: Imports\n  url: https://httr2.r-lib.org\n  repository: https://CRAN.R-project.org/package=httr2\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  year: '2025'\n  doi: 10.32614/CRAN.package.httr2\n- type: software\n  title: jsonlite\n  abstract: 'jsonlite: A Simple and Robust JSON Parser and Generator for R'\n  notes: Imports\n  url: https://jeroen.r-universe.dev/jsonlite\n  repository: https://CRAN.R-project.org/package=jsonlite\n  authors:\n  - family-names: Ooms\n    given-names: Jeroen\n    email: jeroenooms@gmail.com\n    orcid: https://orcid.org/0000-0002-4035-0289\n  year: '2025'\n  doi: 10.32614/CRAN.package.jsonlite\n- type: software\n  title: lifecycle\n  abstract: 'lifecycle: Manage the Life Cycle of your Package Functions'\n  notes: Imports\n  url: https://lifecycle.r-lib.org/\n  repository: https://CRAN.R-project.org/package=lifecycle\n  authors:\n  - family-names: Henry\n    given-names: Lionel\n    email: lionel@posit.co\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n    orcid: https://orcid.org/0000-0003-4757-117X\n  year: '2025'\n  doi: 10.32614/CRAN.package.lifecycle\n- type: software\n  title: lubridate\n  abstract: 'lubridate: Make Dealing with Dates a Little Easier'\n  notes: Imports\n  url: https://lubridate.tidyverse.org\n  repository: https://CRAN.R-project.org/package=lubridate\n  authors:\n  - family-names: Spinu\n    given-names: Vitalie\n    email: spinuvit@gmail.com\n  - family-names: Grolemund\n    given-names: Garrett\n  - family-names: Wickham\n    given-names: Hadley\n  year: '2025'\n  doi: 10.32614/CRAN.package.lubridate\n- type: software\n  title: memoise\n  abstract: 'memoise: ''Memoisation'' of Functions'\n  notes: Imports\n  url: https://memoise.r-lib.org\n  repository: https://CRAN.R-project.org/package=memoise\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@rstudio.com\n  - family-names: Hester\n    given-names: Jim\n  - family-names: Chang\n    given-names: Winston\n    email: winston@rstudio.com\n  - family-names: M\u00fcller\n    given-names: Kirill\n    email: krlmlr+r@mailbox.org\n  - family-names: Cook\n    given-names: Daniel\n    email: danielecook@gmail.com\n  year: '2025'\n  doi: 10.32614/CRAN.package.memoise\n- type: software\n  title: openssl\n  abstract: 'openssl: Toolkit for Encryption, Signatures and Certificates Based on\n    OpenSSL'\n  notes: Imports\n  url: https://jeroen.r-universe.dev/openssl\n  repository: https://CRAN.R-project.org/package=openssl\n  authors:\n  - family-names: Ooms\n    given-names: Jeroen\n    email: jeroenooms@gmail.com\n    orcid: https://orcid.org/0000-0002-4035-0289\n  year: '2025'\n  doi: 10.32614/CRAN.package.openssl\n- type: software\n  title: parallelly\n  abstract: 'parallelly: Enhancing the ''parallel'' Package'\n  notes: Imports\n  url: https://parallelly.futureverse.org\n  repository: https://CRAN.R-project.org/package=parallelly\n  authors:\n  - family-names: Bengtsson\n    given-names: Henrik\n    email: henrikb@braju.com\n    orcid: https://orcid.org/0000-0002-7579-5165\n  year: '2025'\n  doi: 10.32614/CRAN.package.parallelly\n- type: software\n  title: paws.storage\n  abstract: 'paws.storage: ''Amazon Web Services'' Storage Services'\n  notes: Imports\n  url: https://paws-r.r-universe.dev/paws.storage\n  repository: https://CRAN.R-project.org/package=paws.storage\n  authors:\n  - family-names: Kretch\n    given-names: David\n    email: david.kretch@gmail.com\n  - family-names: Banker\n    given-names: Adam\n    email: adam.banker39@gmail.com\n  year: '2025'\n  doi: 10.32614/CRAN.package.paws.storage\n  version: '>= 0.4.0'\n- type: software\n  title: purrr\n  abstract: 'purrr: Functional Programming Tools'\n  notes: Imports\n  url: https://purrr.tidyverse.org/\n  repository: https://CRAN.R-project.org/package=purrr\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n    orcid: https://orcid.org/0000-0003-4757-117X\n  - family-names: Henry\n    given-names: Lionel\n    email: lionel@posit.co\n  year: '2025'\n  doi: 10.32614/CRAN.package.purrr\n- type: software\n  title: readr\n  abstract: 'readr: Read Rectangular Text Data'\n  notes: Imports\n  url: https://readr.tidyverse.org\n  repository: https://CRAN.R-project.org/package=readr\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  - family-names: Hester\n    given-names: Jim\n  - family-names: Bryan\n    given-names: Jennifer\n    email: jenny@posit.co\n    orcid: https://orcid.org/0000-0002-6983-2759\n  year: '2025'\n  doi: 10.32614/CRAN.package.readr\n- type: software\n  title: rlang\n  abstract: 'rlang: Functions for Base Types and Core R and ''Tidyverse'' Features'\n  notes: Imports\n  url: https://rlang.r-lib.org\n  repository: https://CRAN.R-project.org/package=rlang\n  authors:\n  - family-names: Henry\n    given-names: Lionel\n    email: lionel@posit.co\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  year: '2025'\n  doi: 10.32614/CRAN.package.rlang\n- type: software\n  title: sf\n  abstract: 'sf: Simple Features for R'\n  notes: Imports\n  url: https://r-spatial.github.io/sf/\n  repository: https://CRAN.R-project.org/package=sf\n  authors:\n  - family-names: Pebesma\n    given-names: Edzer\n    email: edzer.pebesma@uni-muenster.de\n    orcid: https://orcid.org/0000-0001-8049-7069\n  year: '2025'\n  doi: 10.32614/CRAN.package.sf\n- type: software\n  title: stats\n  abstract: 'R: A Language and Environment for Statistical Computing'\n  notes: Imports\n  authors:\n  - name: R Core Team\n  institution:\n    name: R Foundation for Statistical Computing\n    address: Vienna, Austria\n  year: '2025'\n- type: software\n  title: stringr\n  abstract: 'stringr: Simple, Consistent Wrappers for Common String Operations'\n  notes: Imports\n  url: https://stringr.tidyverse.org\n  repository: https://CRAN.R-project.org/package=stringr\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  year: '2025'\n  doi: 10.32614/CRAN.package.stringr\n- type: software\n  title: tibble\n  abstract: 'tibble: Simple Data Frames'\n  notes: Imports\n  url: https://tibble.tidyverse.org/\n  repository: https://CRAN.R-project.org/package=tibble\n  authors:\n  - family-names: M\u00fcller\n    given-names: Kirill\n    email: kirill@cynkra.com\n    orcid: https://orcid.org/0000-0002-1416-3412\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@rstudio.com\n  year: '2025'\n  doi: 10.32614/CRAN.package.tibble\n- type: software\n  title: xml2\n  abstract: 'xml2: Parse XML'\n  notes: Imports\n  url: https://xml2.r-lib.org\n  repository: https://CRAN.R-project.org/package=xml2\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n  - family-names: Hester\n    given-names: Jim\n  - family-names: Ooms\n    given-names: Jeroen\n    email: jeroenooms@gmail.com\n  year: '2025'\n  doi: 10.32614/CRAN.package.xml2\n- type: software\n  title: flowmapblue\n  abstract: 'flowmapblue: Flow Map Rendering'\n  notes: Suggests\n  url: https://flowmapblue.github.io/flowmapblue.R/\n  repository: https://CRAN.R-project.org/package=flowmapblue\n  authors:\n  - family-names: Boyandin\n    given-names: Ilya\n    email: ilya@boyandin.me\n    orcid: https://orcid.org/0000-0001-5585-7587\n  year: '2025'\n  doi: 10.32614/CRAN.package.flowmapblue\n- type: software\n  title: flowmapper\n  abstract: 'flowmapper: Draw Flows (Migration, Goods, Money, Information) on ''ggplot2''\n    Plots'\n  notes: Suggests\n  url: https://github.com/JohMast/flowmapper\n  repository: https://CRAN.R-project.org/package=flowmapper\n  authors:\n  - family-names: Mast\n    given-names: Johannes\n    email: johannes.mast@dlr.de\n    orcid: https://orcid.org/0000-0001-6595-5834\n  year: '2025'\n  doi: 10.32614/CRAN.package.flowmapper\n  version: '>= 0.1.2'\n- type: software\n  title: furrr\n  abstract: 'furrr: Apply Mapping Functions in Parallel using Futures'\n  notes: Suggests\n  url: https://furrr.futureverse.org/\n  repository: https://CRAN.R-project.org/package=furrr\n  authors:\n  - family-names: Vaughan\n    given-names: Davis\n    email: davis@rstudio.com\n  - family-names: Dancho\n    given-names: Matt\n    email: mdancho@business-science.io\n  year: '2025'\n  doi: 10.32614/CRAN.package.furrr\n- type: software\n  title: future\n  abstract: 'future: Unified Parallel and Distributed Processing in R for Everyone'\n  notes: Suggests\n  url: https://future.futureverse.org\n  repository: https://CRAN.R-project.org/package=future\n  authors:\n  - family-names: Bengtsson\n    given-names: Henrik\n    email: henrikb@braju.com\n    orcid: https://orcid.org/0000-0002-7579-5165\n  year: '2025'\n  doi: 10.32614/CRAN.package.future\n- type: software\n  title: future.mirai\n  abstract: 'future.mirai: A ''Future'' API for Parallel Processing using ''mirai'''\n  notes: Suggests\n  url: https://future.mirai.futureverse.org\n  repository: https://CRAN.R-project.org/package=future.mirai\n  authors:\n  - family-names: Bengtsson\n    given-names: Henrik\n    email: henrikb@braju.com\n    orcid: https://orcid.org/0000-0002-7579-5165\n  year: '2025'\n  doi: 10.32614/CRAN.package.future.mirai\n- type: software\n  title: mapSpain\n  abstract: 'mapSpain: Administrative Boundaries of Spain'\n  notes: Suggests\n  url: https://ropenspain.github.io/mapSpain/\n  repository: https://CRAN.R-project.org/package=mapSpain\n  authors:\n  - family-names: Hernang\u00f3mez\n    given-names: Diego\n    email: diego.hernangomezherrero@gmail.com\n    orcid: https://orcid.org/0000-0001-8457-4658\n  year: '2025'\n  doi: 10.32614/CRAN.package.mapSpain\n- type: software\n  title: quarto\n  abstract: 'quarto: R Interface to ''Quarto'' Markdown Publishing System'\n  notes: Suggests\n  url: https://quarto-dev.github.io/quarto-r/\n  repository: https://CRAN.R-project.org/package=quarto\n  authors:\n  - family-names: Allaire\n    given-names: JJ\n    email: jj@posit.co\n    orcid: https://orcid.org/0000-0003-0174-9868\n  - family-names: Dervieux\n    given-names: Christophe\n    email: cderv@posit.co\n    orcid: https://orcid.org/0000-0003-4474-2498\n  year: '2025'\n  doi: 10.32614/CRAN.package.quarto\n- type: software\n  title: remotes\n  abstract: 'remotes: R Package Installation from Remote Repositories, Including ''GitHub'''\n  notes: Suggests\n  url: https://remotes.r-lib.org\n  repository: https://CRAN.R-project.org/package=remotes\n  authors:\n  - family-names: Cs\u00e1rdi\n    given-names: G\u00e1bor\n    email: csardi.gabor@gmail.com\n  - family-names: Hester\n    given-names: Jim\n  - family-names: Wickham\n    given-names: Hadley\n  - family-names: Chang\n    given-names: Winston\n  - family-names: Morgan\n    given-names: Martin\n  - family-names: Tenenbaum\n    given-names: Dan\n  year: '2025'\n  doi: 10.32614/CRAN.package.remotes\n- type: software\n  title: scales\n  abstract: 'scales: Scale Functions for Visualization'\n  notes: Suggests\n  url: https://scales.r-lib.org\n  repository: https://CRAN.R-project.org/package=scales\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  - family-names: Pedersen\n    given-names: Thomas Lin\n    email: thomas.pedersen@posit.co\n    orcid: https://orcid.org/0000-0002-5147-4711\n  - family-names: Seidel\n    given-names: Dana\n  year: '2025'\n  doi: 10.32614/CRAN.package.scales\n- type: software\n  title: testthat\n  abstract: 'testthat: Unit Testing for R'\n  notes: Suggests\n  url: https://testthat.r-lib.org\n  repository: https://CRAN.R-project.org/package=testthat\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@posit.co\n  year: '2025'\n  doi: 10.32614/CRAN.package.testthat\n  version: '>= 3.0.0'\n- type: software\n  title: tidyverse\n  abstract: 'tidyverse: Easily Install and Load the ''Tidyverse'''\n  notes: Suggests\n  url: https://tidyverse.tidyverse.org\n  repository: https://CRAN.R-project.org/package=tidyverse\n  authors:\n  - family-names: Wickham\n    given-names: Hadley\n    email: hadley@rstudio.com\n  year: '2025'\n  doi: 10.32614/CRAN.package.tidyverse\n\n", "type": "File_dump", "author": [{"type": "Agent", "name": "Egor Kotov", "family_name": "Kotov", "given_name": "Egor", "url": "https://orcid.org/0000-0001-6690-5345"}, {"type": "Agent", "name": "Robin Lovelace", "family_name": "Lovelace", "given_name": "Robin", "url": "https://orcid.org/0000-0001-5679-6536"}], "title": "spanishoddata: Get Spanish Origin-Destination Data", "url": "https://doi.org/10.32614/CRAN.package.spanishoddata", "doi": "10.32614/CRAN.package.spanishoddata", "format": "cff", "datePublished": "2024"}, "confidence": 1, "technique": "file_exploration", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/CITATION.cff"}, {"result": {"value": "To cite the `spanishoddata` R package use:\n\nKotov E, Lovelace R, Vidal-Tortosa E (2024). *spanishoddata*.\ndoi:10.32614/CRAN.package.spanishoddata\n<https://doi.org/10.32614/CRAN.package.spanishoddata>,\n<https://github.com/rOpenSpain/spanishoddata>.\n\nTo cite the official website of the mobility study use:\n\nMinisterio de Transportes y Movilidad Sostenible (MITMS) (2024).\n\u201cEstudio de la movilidad con Big Data (Study of mobility with Big\n<https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data>.\n\nTo cite the methodology for 2022 and onwards data use:\n\nMinisterio de Transportes y Movilidad Sostenible (MITMS) (2024).\n*Estudio de movilidad de viajeros de \u00e1mbito nacional aplicando la\ntecnolog\u00eda Big Data. Informe metodol\u00f3gico (Study of National Traveler\nmobility Using Big Data Technology. Methodological Report)*.\n<https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf>.\n\nTo cite the methodology for 2020-2021 data use:\n\nMinisterio de Transportes, Movilidad y Agenda Urbana (MITMA) (2021).\n*An\u00e1lisis de la movilidad en Espa\u00f1a con tecnolog\u00eda Big Data durante el\nestado de alarma para la gesti\u00f3n de la crisis del COVID-19 (Analysis of\nmobility in Spain with Big Data technology during the state of alarm for\nCOVID-19 crisis management)*.\n<https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf>.\n\nSee package website for more details:\nhttps://ropenspain.github.io/spanishoddata/\n\nBibTeX:\n\n    @Manual{r-spanishoddata,\n      title = {spanishoddata},\n      author = {Egor Kotov and Robin Lovelace and Eugeni Vidal-Tortosa},\n      year = {2024},\n      url = {https://github.com/rOpenSpain/spanishoddata},\n      doi = {10.32614/CRAN.package.spanishoddata},\n    }\n\n    @Misc{mitms_mobility_web,\n      title = {Estudio de la movilidad con Big Data (Study of mobility with Big Data)},\n      author = {{Ministerio de Transportes y Movilidad Sostenible (MITMS)}},\n      year = {2024},\n      url = {https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data},\n    }\n\n    @Manual{mitms_methodology_2022_v8,\n      title = {Estudio de movilidad de viajeros de \u00e1mbito nacional aplicando la tecnolog\u00eda Big Data. Informe metodol\u00f3gico (Study of National Traveler mobility Using Big Data Technology. Methodological Report)},\n      author = {{Ministerio de Transportes y Movilidad Sostenible (MITMS)}},\n      year = {2024},\n      url = {https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf},\n    }\n\n    @Manual{mitma_methodology_2020_v3,\n      title = {An\u00e1lisis de la movilidad en Espa\u00f1a con tecnolog\u00eda Big Data durante el estado de alarma para la gesti\u00f3n de la crisis del COVID-19 (Analysis of mobility in Spain with Big Data technology during the state of alarm for COVID-19 crisis management)},\n      author = {{Ministerio de Transportes, Movilidad y Agenda Urbana (MITMA)}},\n      year = {2021},\n      url = {https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf},\n    }\n", "type": "Text_excerpt", "original_header": "Citation", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>", "Further information"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "\n\n\n\n\n\n\n\n\n\n<div id=\"refs\" class=\"references csl-bib-body hanging-indent\"\nentry-spacing=\"0\">\n\n<div id=\"ref-lovelace_od_2024\" class=\"csl-entry\">\n\nLovelace, Robin, and Malcolm Morgan. 2024. \u201cOd: Manipulate and Map\nOrigin-Destination Data,\u201d August.\n<https://doi.org/10.32614/CRAN.package.od>.\n\n</div>\n\n<div id=\"ref-mitms_mobility_web\" class=\"csl-entry\">\n\nMinisterio de Transportes y Movilidad Sostenible MITMS. 2024. \u201cEstudio\nde La Movilidad Con Big Data (Study of Mobility with Big Data).\u201d\n<https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data>.\n\n</div>\n\n</div>", "type": "Text_excerpt", "original_header": "References", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "@manual{r-spanishoddata,\n    doi = {10.32614/CRAN.package.spanishoddata},\n    url = {https://github.com/rOpenSpain/spanishoddata},\n    year = {2024},\n    author = {Egor Kotov and Robin Lovelace and Eugeni Vidal-Tortosa},\n    title = {spanishoddata},\n}", "type": "Text_excerpt", "format": "bibtex", "doi": "10.32614/CRAN.package.spanishoddata", "title": "spanishoddata", "author": "Egor Kotov and Robin Lovelace and Eugeni Vidal-Tortosa", "url": "https://github.com/rOpenSpain/spanishoddata"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "@misc{mitms_mobility_web,\n    url = {https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data},\n    year = {2024},\n    author = {{Ministerio de Transportes y Movilidad Sostenible (MITMS)}},\n    title = {Estudio de la movilidad con Big Data (Study of mobility with Big Data)},\n}", "type": "Text_excerpt", "format": "bibtex", "title": "Estudio de la movilidad con Big Data (Study of mobility with Big Data)", "author": "{Ministerio de Transportes y Movilidad Sostenible (MITMS)}", "url": "https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "@manual{mitms_methodology_2022_v8,\n    url = {https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf},\n    year = {2024},\n    author = {{Ministerio de Transportes y Movilidad Sostenible (MITMS)}},\n    title = {Estudio de movilidad de viajeros de \u00e1mbito nacional aplicando la tecnolog\u00eda Big Data. Informe metodol\u00f3gico (Study of National Traveler mobility Using Big Data Technology. Methodological Report)},\n}", "type": "Text_excerpt", "format": "bibtex", "title": "Estudio de movilidad de viajeros de \u00e1mbito nacional aplicando la tecnolog\u00eda Big Data. Informe metodol\u00f3gico (Study of National Traveler mobility Using Big Data Technology. Methodological Report)", "author": "{Ministerio de Transportes y Movilidad Sostenible (MITMS)}", "url": "https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "@manual{mitma_methodology_2020_v3,\n    url = {https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf},\n    year = {2021},\n    author = {{Ministerio de Transportes, Movilidad y Agenda Urbana (MITMA)}},\n    title = {An\u00e1lisis de la movilidad en Espa\u00f1a con tecnolog\u00eda Big Data durante el estado de alarma para la gesti\u00f3n de la crisis del COVID-19 (Analysis of mobility in Spain with Big Data technology during the state of alarm for COVID-19 crisis management)},\n}", "type": "Text_excerpt", "format": "bibtex", "title": "An\u00e1lisis de la movilidad en Espa\u00f1a con tecnolog\u00eda Big Data durante el estado de alarma para la gesti\u00f3n de la crisis del COVID-19 (Analysis of mobility in Spain with Big Data technology during the state of alarm for COVID-19 crisis management)", "author": "{Ministerio de Transportes, Movilidad y Agenda Urbana (MITMA)}", "url": "https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "license": [{"result": {"value": "# MIT License\n\nCopyright (c) 2024 spanishoddata authors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n", "type": "File_dump", "name": "MIT License", "spdx_id": "MIT"}, "confidence": 1, "technique": "file_exploration", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/LICENSE.md"}, {"result": {"value": "MIT + file LICENSE", "type": "String", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, {"result": {"value": "https://spdx.org/licenses/MIT", "type": "License", "identifier": "https://spdx.org/licenses/https://spdx.org/licenses/MIT", "spdx_id": "https://spdx.org/licenses/MIT"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "readme_url": [{"result": {"value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd", "type": "Url"}, "confidence": 1, "technique": "file_exploration"}, {"result": {"value": "https://github.com/rOpenSpain/spanishoddata/blob/main/README.md", "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}, {"result": {"value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.md", "type": "Url"}, "confidence": 1, "technique": "file_exploration"}], "has_build_file": [{"result": {"value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION", "type": "Url", "format": "description"}, "confidence": 1, "technique": "file_exploration", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}], "has_package_file": [{"result": {"value": "DESCRIPTION", "type": "Url", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}], "package_id": [{"result": {"value": "spanishoddata", "type": "String", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}], "version": [{"result": {"value": "0.2.1.9000", "type": "String", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, {"result": {"value": "0.2.1", "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "authors": [{"result": {"value": [{"value": "Egor Kotov", "email": "kotov.egor@gmail.com"}], "type": "Agent", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/DESCRIPTION"}, {"result": {"value": "Egor Kotov", "type": "String", "email": "kotov.egor@gmail.com", "identifier": "https://orcid.org/0000-0001-6690-5345"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}, {"result": {"value": "Robin Lovelace", "type": "String", "email": "rob00x@gmail.com", "identifier": "https://orcid.org/0000-0001-5679-6536"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "continuous_integration": [{"result": {"value": "https://github.com/rOpenSpain/spanishoddata/actions/workflows/R-CMD-check.yaml", "type": "Url"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "development_status": [{"result": {"value": "https://www.repostatus.org/#active", "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}], "identifier": [{"result": {"value": "spanishoddata", "type": "String"}, "confidence": 1, "technique": "code_parser", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/codemeta.json"}, {"result": {"type": "Url", "value": "https://doi.org/10.32614/CRAN.package.spanishoddata"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://doi.org/10.5281/zenodo.14516104"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "installation": [{"result": {"value": "---\nexecute: \n  eval: false\n---\n\n\n## Install the package {#install-package}\n\nInstall from CRAN:\n\n```{r}\ninstall.packages(\"spanishoddata\")\n```\n\n\n\n<details><summary>Alternative installation and developemnt</summary>\n\nYou can also install the latest development version of the package from rOpenSpain R universe:\n\n```{r}\ninstall.packages(\"spanishoddata\",\n  repos = c(\"https://ropenspain.r-universe.dev\",\n    \"https://cloud.r-project.org\"))\n```\n\n\nAlternative way to install the development version from GitHub:\n\n```{r}\nif (!require(\"remotes\")) install.packages(\"remotes\")\n\nremotes::install_github(\"rOpenSpain/spanishoddata\",\n  force = TRUE, dependencies = TRUE)\n```\n\n**For Developers**\n\nTo load the package locally, clone it and navigate to the root of the package in the terminal, e.g. with the following:\n\n```bash\ngh repo clone rOpenSpain/spanishoddata\ncode spanishoddata\n# with rstudio:\nrstudio spanishoddata/spanishoddata.Rproj\n```\n\nThen run the following command from the R console:\n\n```{r}\n#| eval: false\ndevtools::load_all()\n```\n\n</details>\n\nYou can also explore the package and the data in an interactive RStudio container right in your web browser thanks to Binder, just click [the link](https://mybinder.org/v2/gh/e-kotov/spanishoddata-playground/HEAD?urlpath=rstudio) or the button: [![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/e-kotov/spanishoddata-playground/HEAD?urlpath=rstudio). Note that the session will be limited by memory and you will only be able to work with one full day of data.\n", "type": "File_dump"}, "confidence": 1, "technique": "file_exploration", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/inst/vignette-include/install-package.qmd"}, {"result": {"value": "Install from CRAN:\n\n``` r\ninstall.packages(\"spanishoddata\")\n```\n\n<details>\n\n<summary>\n\nAlternative installation and developemnt\n</summary>\n\nYou can also install the latest development version of the package from\nrOpenSpain R universe:\n\n``` r\ninstall.packages(\"spanishoddata\",\n  repos = c(\"https://ropenspain.r-universe.dev\",\n    \"https://cloud.r-project.org\"))\n```\n\nAlternative way to install the development version from GitHub:\n\n``` r\nif (!require(\"remotes\")) install.packages(\"remotes\")\n\nremotes::install_github(\"rOpenSpain/spanishoddata\",\n  force = TRUE, dependencies = TRUE)\n```\n\n**For Developers**\n\nTo load the package locally, clone it and navigate to the root of the\npackage in the terminal, e.g.\u00a0with the following:\n\n``` bash\ngh repo clone rOpenSpain/spanishoddata\ncode spanishoddata\n# with rstudio:\nrstudio spanishoddata/spanishoddata.Rproj\n```\n\nThen run the following command from the R console:\n\n``` r\ndevtools::load_all()\n```\n\n</details>\n\nYou can also explore the package and the data in an interactive RStudio\ncontainer right in your web browser thanks to Binder, just click [the\nlink](https://mybinder.org/v2/gh/e-kotov/spanishoddata-playground/HEAD?urlpath=rstudio)\nor the button:\n[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/e-kotov/spanishoddata-playground/HEAD?urlpath=rstudio).\nNote that the session will be limited by memory and you will only be\nable to work with one full day of data.\n\nLoad it as follows:\n\n``` r\nlibrary(spanishoddata)\n```\n", "type": "Text_excerpt", "original_header": "Install the package", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "Choose where `{spanishoddata}` should download (and convert) the data by\nsetting the data directory following command:\n\n``` r\nspod_set_data_dir(data_dir = \"~/spanish_od_data\")\n```\n\nThe function above will also ensure that the directory is created and\nthat you have sufficient permissions to write to it.\n\n<details>\n\n<summary>\n\nSetting data directory for advanced users\n</summary>\n\nYou can also set the data directory with an environment variable:\n\n``` r\nSys.setenv(SPANISH_OD_DATA_DIR = \"~/spanish_od_data\")\n```\n\nThe package will create this directory if it does not exist on the first\nrun of any function that downloads the data.\n\nTo permanently set the directory for all projects, you can specify the\ndata directory globally by setting the `SPANISH_OD_DATA_DIR` environment\nvariable, e.g.\u00a0with the following command:\n\n``` r\nusethis::edit_r_environ()\n# Then set the data directory globally, by typing this line in the file:\n```\n\n    SPANISH_OD_DATA_DIR = \"~/spanish_od_data\"\n\nYou can also set the data directory locally, just for the current\nproject. Set the \u2018envar\u2019 in the working directory by editing `.Renviron`\nfile in the root of the project:\n\n``` r\nfile.edit(\".Renviron\")\n```\n\n</details>\n", "type": "Text_excerpt", "original_header": "Set the data directory", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "usage": [{"result": {"value": "\n\n[![Project Status:\nActive](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)\n<a href=\"https://lifecycle.r-lib.org/articles/stages.html#stable\"\ntarget=\"_blank\"><img\nsrc=\"https://img.shields.io/badge/lifecycle-stable-brightgreen.svg\"\nalt=\"Lifecycle: stable\" /></a>\n<a href=\"https://CRAN.R-project.org/package=spanishoddata\"\ntarget=\"_blank\"><img\nsrc=\"https://www.r-pkg.org/badges/version/spanishoddata\"\nalt=\"CRAN status\" /></a>\n<a href=\"https://CRAN.R-project.org/package=spanishoddata\"\ntarget=\"_blank\"><img\nsrc=\"https://cranlogs.r-pkg.org/badges/grand-total/spanishoddata?color=blue\"\nalt=\"CRAN/METACRAN Total downloads\" /></a>\n<a href=\"https://CRAN.R-project.org/package=spanishoddata\"\ntarget=\"_blank\"><img\nsrc=\"https://cranlogs.r-pkg.org/badges/spanishoddata?color=blue\"\nalt=\"CRAN/METACRAN Downloads per month\" /></a>\n[![R-CMD-check](https://github.com/rOpenSpain/spanishoddata/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/rOpenSpain/spanishoddata/actions/workflows/R-CMD-check.yaml)\n[![DOI](https://zenodo.org/badge/DOI/10.32614/CRAN.package.spanishoddata.svg)](https://doi.org/10.32614/CRAN.package.spanishoddata)\n[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.14516104.svg)](https://doi.org/10.5281/zenodo.14516104)\n \n\n**spanishoddata** is an R package that provides functions for\ndownloading and formatting Spanish open mobility data released by the\nSpanish government (Ministerio de Transportes y Movilidad Sostenible\nMITMS 2024).\n\nIt supports the two versions of the Spanish mobility data. [The first\nversion (2020 to\n2021)](https://www.transportes.gob.es/ministerio/proyectos-singulares/estudios-de-movilidad-con-big-data/estudios-de-movilidad-anteriores/covid-19/opendata-movilidad),\ncovering the period of the COVID-19 pandemic, contains tables detailing\ntrip numbers and distances, broken down by origin, destination,\nactivity, residence province, time interval, distance interval, and\ndate. It also provides tables of individual counts by location and trip\nfrequency. [The second version (2022\nonwards)](https://www.transportes.gob.es/ministerio/proyectos-singulares/estudios-de-movilidad-con-big-data/opendata-movilidad)\nimproves spatial resolution, adds trips to and from Portugal and France,\nand introduces new fields for study-related activities and\nsociodemographic factors (income, age, and sex) in the\norigin-destination tables, along with additional tables showing\nindividual counts by overnight stay location, residence, and date. See\nthe [package website](https://rOpenSpain.github.io/spanishoddata/) and\nvignettes for\n[v1](https://rOpenSpain.github.io/spanishoddata/articles/v1-2020-2021-mitma-data-codebook)\nand\n[v2](https://rOpenSpain.github.io/spanishoddata/articles/v2-2022-onwards-mitma-data-codebook)\ndata for more details.\n\n**spanishoddata** is designed to save time by providing the data in\nanalysis-ready formats. Automating the process of downloading, cleaning,\nand importing the data can also reduce the risk of errors in the\nlaborious process of data preparation. It also reduces computational\nresources by using computationally efficient packages behind the scenes.\nTo effectively work with multiple data files, it\u2019s recommended you set\nup a data directory where the package can search for the data and\ndownload only the files that are not already present.\n", "type": "Text_excerpt", "original_header": "spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "<div id=\"fig-barcelona-flows\">\n\n<img src=\"vignettes/media/flows_plot_barcelona.svg\"\nstyle=\"width:100.0%\" />\n\nFigure\u00a01: Example of the data available through the package: daily flows\nin Barcelona on 7 April 2021\n\n</div>\n\nTo create static maps like that see our vignette\n[here](https://ropenspain.github.io/spanishoddata/articles/flowmaps-static.html).\n\n------------------------------------------------------------------------\n\n<div id=\"fig-spain-flows\">\n\n![](https://ropenspain.github.io/spanishoddata/media/spain-folding-flows.gif)\n\nFigure\u00a02: Example of the data available through the package: interactive\ndaily flows in Spain\n\n</div>\n\n<div id=\"fig-spain-flows\">\n\n![](https://ropenspain.github.io/spanishoddata/media/barcelona-time.gif)\n\nFigure\u00a03: Example of the data available through the package: interactive\ndaily flows in Barcelona with time filter\n\n</div>\n\nTo create interactive maps see our vignette\n[here](https://ropenspain.github.io/spanishoddata/articles/flowmaps-interactive.html).\n", "type": "Text_excerpt", "original_header": "Examples of available data", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "If you only need flows data aggregated by day at municipal level, you\ncan use the `spod_quick_get_od()` function. This will download the data\ndirectly from the web API and let you analyse it in-memory. More on this\nin the [Quickly get daily\ndata](https://ropenspain.github.io/spanishoddata/articles/quick-get.html)\nvignette.\n\nIf you only want to analyse the data for a few days, you can use the\n`spod_get()` function. It will download the raw data in CSV format and\nlet you analyse it in-memory. This is what we cover in the steps on this\npage.\n\nIf you need longer periods (several months or years), you should use the\n`spod_convert()` and `spod_connect()` functions, which will convert the\ndata into special format which is much faster for analysis, for this see\nthe [Download and convert OD\ndatasets](https://ropenspain.github.io/spanishoddata/articles/convert.html)\nvignette. `spod_get_zones()` will give you spatial data with zones that\ncan be matched with the origin-destination flows from the functions\nabove using zones \u2019id\u2019s. Please see a simple example below, and also\nconsult the vignettes with detailed data description and instructions in\nthe package vignettes with `spod_codebook(ver = 1)` and\n`spod_codebook(ver = 2)`, or simply visit the package website at\n<https://ropenspain.github.io/spanishoddata/>. The\n<a href=\"#fig-overall-flow\" class=\"quarto-xref\">Figure\u00a04</a> presents\nthe overall approach to accessing the data in the `spanishoddata`\npackage.\n\n<div id=\"fig-overall-flow\">\n\n<img src=\"man/figures/package-functions-overview.svg\"\nstyle=\"width:78.0%\" />\n\nFigure\u00a04: The overview of package functions to get the data\n\n</div>\n", "type": "Text_excerpt", "original_header": "Overall approach to accessing the data", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "To run the code in this README we will use the following setup:\n\n``` r\nlibrary(tidyverse)\ntheme_set(theme_minimal())\nsf::sf_use_s2(FALSE)\n```\n\nGet metadata for the datasets as follows (we are using version 2 data\ncovering years 2022 and onwards):\n\n``` r\nmetadata <- spod_available_data(ver = 2) # for version 2 of the data\nmetadata\n```\n\n    # A tibble: 9,442 \u00d7 6\n       target_url           pub_ts              file_extension data_ym data_ymd  \n       <chr>                <dttm>              <chr>          <date>  <date>    \n     1 https://movilidad-o\u2026 2024-07-30 10:54:08 gz             NA      2022-10-23\n     2 https://movilidad-o\u2026 2024-07-30 10:51:07 gz             NA      2022-10-22\n     3 https://movilidad-o\u2026 2024-07-30 10:47:52 gz             NA      2022-10-20\n     4 https://movilidad-o\u2026 2024-07-30 10:14:55 gz             NA      2022-10-18\n     5 https://movilidad-o\u2026 2024-07-30 10:11:58 gz             NA      2022-10-17\n     6 https://movilidad-o\u2026 2024-07-30 10:09:03 gz             NA      2022-10-12\n     7 https://movilidad-o\u2026 2024-07-30 10:05:57 gz             NA      2022-10-07\n     8 https://movilidad-o\u2026 2024-07-30 10:02:12 gz             NA      2022-08-07\n     9 https://movilidad-o\u2026 2024-07-30 09:58:34 gz             NA      2022-08-06\n    10 https://movilidad-o\u2026 2024-07-30 09:54:30 gz             NA      2022-08-05\n    # \u2139 9,432 more rows\n    # \u2139 1 more variable: local_path <chr>\n", "type": "Text_excerpt", "original_header": "Showcase", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "Zones can be downloaded as follows:\n\n``` r\ndistritos <- spod_get_zones(\"distritos\", ver = 2)\ndistritos_wgs84 <- distritos |>\n  sf::st_simplify(dTolerance = 200) |>\n  sf::st_transform(4326)\nplot(sf::st_geometry(distritos_wgs84), lwd = 0.2)\n```\n\n![](man/figures/README-distritos-1.png)\n", "type": "Text_excerpt", "original_header": "Zones", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>", "Showcase"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "``` r\nod_db <- spod_get(\n  type = \"origin-destination\",\n  zones = \"districts\",\n  dates = c(start = \"2024-03-01\", end = \"2024-03-07\")\n)\nclass(od_db)\n```\n\n    [1] \"tbl_duckdb_connection\" \"tbl_dbi\"               \"tbl_sql\"              \n    [4] \"tbl_lazy\"              \"tbl\"                  \n\n``` r\ncolnames(od_db)\n```\n\n     [1] \"full_date\"                   \"hour\"                  \n     [3] \"id_origin\"                   \"id_destination\"             \n     [5] \"distance\"                    \"activity_origin\"            \n     [7] \"activity_destination\"        \"study_possible_origin\"      \n     [9] \"study_possible_destination\"  \"residence_province_ine_code\"\n    [11] \"residence_province\"          \"income\"                     \n    [13] \"age\"                         \"sex\"                        \n    [15] \"n_trips\"                     \"trips_total_length_km\"      \n    [17] \"year\"                        \"month\"                      \n    [19] \"day\"                        \n\nThe result is an R database interface object (`tbl_dbi`) that can be\nused with dplyr functions and SQL queries \u2018lazily\u2019, meaning that the\ndata is not loaded into memory until it is needed. Let\u2019s do an\naggregation to find the total number trips per hour over the 7 days:\n\n``` r\nn_per_hour <- od_db |>\n  group_by(date, hour) |>\n  summarise(n = n(), Trips = sum(n_trips)) |>\n  collect() |>\n  mutate(Time = lubridate::ymd_h(paste0(date, hour, sep = \" \"))) |>\n  mutate(Day = lubridate::wday(Time, label = TRUE))\nn_per_hour |>\n  ggplot(aes(x = Time, y = Trips)) +\n  geom_line(aes(colour = Day)) +\n  labs(title = \"Number of trips per hour over 7 days\")\n```\n\n![](man/figures/README-trips-per-hour-1.png)\n\nThe figure above summarises 925,874,012 trips over the 7 days associated\nwith 135,866,524 records.\n", "type": "Text_excerpt", "original_header": "OD data", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>", "Showcase"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "As we demonstrated above, you can perform very quick analysis using just\na few lines of code.\n\nTo highlight the benefits of the package, here is how you would do this\nmanually:\n\n- download the [xml](https://movilidad-opendata.mitma.es/RSS.xml) file\n  with the download links\n\n- parse this xml to extract the download links\n\n- write a script to download the files and locate them on disk in a\n  logical manner\n\n- figure out the data structure of the downloaded files, read the\n  codebook\n\n- translate the data (columns and values) into English, if you are not\n  familiar with Spanish\n\n- write a script to load the data into the database or figure out a way\n  to claculate summaries on multiple files\n\n- and much more\u2026\n\nWe did all of that for you and present you with a few simple functions\nthat get you straight to the data in one line of code, and you are ready\nto run any analysis on it.\n", "type": "Text_excerpt", "original_header": "`spanishoddata` advantage over accessing the data yourself", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>", "Showcase"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "We\u2019ll use the same input data to pick-out the most important flows in\nSpain, with a focus on longer trips for visualisation:\n\n``` r\nod_national_aggregated <- od_db |>\n  group_by(id_origin, id_destination) |>\n  summarise(Trips = sum(n_trips), .groups = \"drop\") |>\n  filter(Trips > 500) |>\n  collect() |>\n  arrange(desc(Trips))\nod_national_aggregated\n```\n\n    # A tibble: 96,404 \u00d7 3\n       id_origin id_destination    Trips\n       <fct>     <fct>             <dbl>\n     1 2807908   2807908        2441404.\n     2 0801910   0801910        2112188.\n     3 0801902   0801902        2013618.\n     4 2807916   2807916        1821504.\n     5 2807911   2807911        1785981.\n     6 04902     04902          1690606.\n     7 2807913   2807913        1504484.\n     8 2807910   2807910        1299586.\n     9 0704004   0704004        1287122.\n    10 28106     28106          1286058.\n    # \u2139 96,394 more rows\n\nThe results show that the largest flows are intra-zonal. Let\u2019s keep only\nthe inter-zonal flows:\n\n``` r\nod_national_interzonal <- od_national_aggregated |>\n  filter(id_origin != id_destination)\n```\n\nWe can convert these to geographic data with the {od} package (Lovelace\nand Morgan 2024):\n\n``` r\nod_national_sf <- od::od_to_sf(\n  od_national_interzonal,\n  z = distritos_wgs84\n)\ndistritos_wgs84 |>\n  ggplot() +\n  geom_sf(fill = \"grey\") +\n  geom_sf(data = spData::world, fill = NA, colour = \"black\") +\n  geom_sf(aes(linewidth = Trips), colour = \"blue\", data = od_national_sf) +\n  coord_sf(xlim = c(-10, 5), ylim = c(35, 45)) +\n  theme_void() +\n  scale_linewidth_continuous(range = c(0.2, 3))\n```\n\n![](man/figures/README-desire-lines-1.png)\n\nLet\u2019s focus on trips in and around a particular area (Salamanca):\n\n``` r\nsalamanca_zones <- zonebuilder::zb_zone(\"Salamanca\")\ndistritos_salamanca <- distritos_wgs84[salamanca_zones, ]\nplot(distritos_salamanca)\n```\n\n![](man/figures/README-salamanca-zones-1.png)\n\nWe will use this information to subset the rows, to capture all movement\nwithin the study area:\n\n``` r\nids_salamanca <- distritos_salamanca$id\nod_salamanca <- od_national_sf |>\n  filter(id_origin %in% ids_salamanca) |>\n  filter(id_destination %in% ids_salamanca) |>\n  arrange(Trips)\n```\n\nLet\u2019s plot the results:\n\n``` r\nod_salamanca_sf <- od::od_to_sf(\n  od_salamanca,\n  z = distritos_salamanca\n)\nggplot() +\n  geom_sf(fill = \"grey\", data = distritos_salamanca) +\n  geom_sf(aes(colour = Trips), size = 1, data = od_salamanca_sf) +\n  scale_colour_viridis_c() +\n  theme_void()\n```\n\n![](man/figures/README-salamanca-plot-1.png)\n", "type": "Text_excerpt", "original_header": "Desire lines", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "For more information on the package, see:\n\n- The [pkgdown site](https://rOpenSpain.github.io/spanishoddata/)\n\n  - [Functions\n    reference](https://rOpenSpain.github.io/spanishoddata/reference/index.html)\n  - [v1 data (2020-2021)\n    codebook](https://rOpenSpain.github.io/spanishoddata/articles/v1-2020-2021-mitma-data-codebook.html)\n  - [v2 data (2022 onwards) codebook (work in\n    progress)](https://rOpenSpain.github.io/spanishoddata/articles/v2-2022-onwards-mitma-data-codebook.html)\n  - [Download and convert\n    data](https://rOpenSpain.github.io/spanishoddata/articles/convert.html)\n  - The [OD disaggregation\n    vignette](https://rOpenSpain.github.io/spanishoddata/articles/disaggregation.html)\n    showcases flows disaggregation\n  - [Making static\n    flowmaps](https://rOpenSpain.github.io/spanishoddata/articles/flowmaps-static.html)\n    vignette shows how to create flowmaps using the data acquired with\n    `{spanishoddata}`\n  - [Making interactive\n    flowmaps](https://rOpenSpain.github.io/spanishoddata/articles/flowmaps-interactive.html)\n    shows how to create an interactive flowmap using the data acquired\n    with `{spanishoddata}`\n  - [Quickly getting daily aggregated 2022+ data at municipality\n    level](https://ropenspain.github.io/spanishoddata/articles/quick-get.html)\n\n- Teaching materials that use `spanishoddata`:\n\n  - Tutorial/workshop [\u201cAnalysing massive open human mobility data using\n    spanishoddata, duckdb and\n    flowmaps\u201d](https://www.ekotov.pro/agit-2025-spanishoddata/) by [Egor\n    Kotov](http://github.com/e-kotov) (held at [Applied Geoinformatics\n    (AGIT) Conference 2025](https://agit.at/en/program/), Salzburg,\n    Austria)\n    [![DOI:10.5281/zenodo.15794849](https://zenodo.org/badge/DOI/10.5281/zenodo.15794849.svg)](https://doi.org/10.5281/zenodo.15794849)\n\n  - Tutorial [\u201cMobility Flows and Accessibility Using R and Big Open\n    Data\u201d](https://www.ekotov.pro/spanish-open-mobility-workshop-ic2s2-2025/)\n    by [Egor Kotov](http://github.com/e-kotov) and [Johannes\n    Mast](https://github.com/JohMast) (held at [IC2S2\n    2025](https://www.ic2s2-2025.org/) (11th International Conference on\n    Computational Social Science), Norrk\u00f6ping, Sweden)\n    [![DOI:10.5281/zenodo.16238597](https://zenodo.org/badge/DOI/10.5281/zenodo.16238597.svg)](https://doi.org/10.5281/zenodo.16238597)\n\n  - [Data Science for Transport\n    Planning](https://tdscience.github.io/dstp/) course by [Robin\n    Lovelace](https://github.com/robinlovelace), [Juan P.\n    Fonseca-Zamora](https://github.com/juanfonsecaLS1), and [Yuanxuan\n    Yang](https://github.com/yyuanxuan) (held at the [Institute for\n    Transport Studies, University of\n    Leeds](https://environment.leeds.ac.uk/transport))\n", "type": "Text_excerpt", "original_header": "Further information", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"value": "Try the new work-in-progress package:\n<https://github.com/pySpainMobility/pySpainMobility>.\n", "type": "Text_excerpt", "original_header": "Working with Python?", "parent_header": ["spanishoddata: Get Spanish Origin-Destination Data <a href=\"https://rOpenSpain.github.io/spanishoddata/\"><img src=\"man/figures/logo.png\" align=\"right\" width=\"200\" alt=\"spanishoddata website\" /></a>", "Further information"]}, "confidence": 1, "technique": "header_analysis", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "executable_example": [{"result": {"type": "Url", "value": "https://mybinder.org/v2/gh/e-kotov/spanishoddata-playground/HEAD?urlpath=rstudio"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "repository_status": [{"result": {"type": "Url", "value": "https://www.repostatus.org/#project", "description": "Project Status:\nActive"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "logo": [{"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/logo.png"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}], "images": [{"result": {"type": "Url", "value": "https://ropenspain.github.io/spanishoddata/media/spain-folding-flows.gif"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://ropenspain.github.io/spanishoddata/media/barcelona-time.gif"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/vignettes/media/flows_plot_barcelona.svg"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/package-functions-overview.svg"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/README-distritos-1.png"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/README-trips-per-hour-1.png"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/README-desire-lines-1.png"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/README-salamanca-zones-1.png"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}, {"result": {"type": "Url", "value": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/man/figures/README-salamanca-plot-1.png"}, "confidence": 1, "technique": "regular_expression", "source": "https://raw.githubusercontent.com/rOpenSpain/spanishoddata/main/README.qmd"}]}